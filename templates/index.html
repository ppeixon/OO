{% extends 'base.html' %}
{% block title %}Listado de órdenes{% endblock %}

{% block content %}
<div class="toolbar">
  <a class="btn" href="{{ url_for('create_order') }}">+ Nueva orden</a>
  <form method="get" class="search-form">
    <input type="text" name="q" value="{{ query }}" placeholder="Buscar..." />
    <button type="submit">Buscar</button>
  </form>
</div>

<table>
  <thead>
    <tr>
      <th>ID</th>
      <th>Referencia</th>
      <th>Empresa</th>
      <th>Descripción</th>
      <th>Estado</th>
      <th>Creada</th>
      <th>Acciones</th>
    </tr>
  </thead>
  <tbody>
    {% for order in orders %}
      <tr>
        <td>{{ order.id }}</td>
        <td>{{ order.reference }}</td>
        <td>{{ order.company }}</td>
        <td>{{ order.description }}</td>
        <td><span class="status">{{ order.status }}</span></td>
        <td>{{ order.created_at }}</td>
        <td class="actions">
          <a href="{{ url_for('edit_order', order_id=order.id) }}">Editar</a>
          <form method="post" action="{{ url_for('delete_order', order_id=order.id) }}" onsubmit="return confirm('¿Eliminar esta orden?');">
            <button class="danger" type="submit">Eliminar</button>
          </form>
        </td>
      </tr>
    {% else %}
      <tr>
        <td colspan="7">No hay órdenes registradas todavía.</td>
      </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
